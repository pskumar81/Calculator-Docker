Step 1: Created a VM in Azure with below ARM template (see calcserver.json)

Step 2: SSH via Bastion which is easier. Once in VM run below commands

# Update package list
sudo apt update

# Install Docker
sudo apt install -y docker.io

# Start Docker service
sudo systemctl start docker
sudo systemctl enable docker

# Add current user to docker group (optional - to run without sudo)
sudo usermod -aG docker $USER
# Log out and back in for group changes to take effect


# Pull server image
docker pull pskumar81/calculator-grpc-server:latest

# Pull client image  
docker pull pskumar81/calculator-grpc-client:latest

# Verify images are downloaded
docker images | grep calculator-grpc

# Create custom network for container communication
docker network create calculator-grpc-network

# Start server container
docker run -d --name calculator-grpc-server --network calculator-grpc-network -p 5002:5002 pskumar81/calculator-grpc-server:latest

# Check server is running
docker ps
docker logs calculator-grpc-server


# Test server is responding (from VM)
curl -v http://localhost:5002

# Or check from external (if firewall allows)
curl -v http://your-vm-ip:5002


# Run client interactively - all 3 tests passed
#Test 1: in Same VM
docker run -it --rm  --name calculator-grpc-client  --network calculator-grpc-network -e SERVER_URL="http://calculator-grpc-server:5002"  pskumar81/calculator-grpc-client:latest
#Test 2: From local deskop - updated the Serveurl to Azure VM public ip and port 5002. Ran the client and it worked fine. Verified the docker log as well and can see entries :)
#Test 3: Spun another VM for client and connected
docker run -it --rm  --name calculator-grpc-client  --network calculator-grpc-network -e SERVER_URL="http://172.210.65.162:5002"  pskumar81/calculator-grpc-client:latest


# If you need external access to port 5002
sudo ufw allow 5002/tcp

# For Azure Network Security Group, add inbound rule:
# Port: 5002, Protocol: TCP, Source: Any (or specific IPs)